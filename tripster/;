class MessagesAPI < ActiveRecord::Base

  def self.client(user)
    @client = Twitter::Client.new
    @client.consumer_key    = TWITTER_CONSUMER_KEY
    @client.consumer_secret = TWITTER_CONSUMER_SECRET
    @client.oauth_token     = user.access_token
    @client.oauth_token_secret = user.access_secret
  end

  def self.feed_for(user_id, start_at, ends_at)
    user = User.find(user_id)
    self.start_up(user)
    timeline = client.user_timeline(client.user.id, count: 200)

    timeline.select do |message|
      message.created_at > starts_at  && message.created_at < ends_at
    end
  end


  #using Twitter
  # #check initializers/feeds.rb for setup info
  # def self.connect_url
  #   Twitter.authorize_url(:redirect_uri => MESSAGES_CALLBACK_URL)
  # end
end
